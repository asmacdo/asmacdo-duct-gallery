# Feature Specification: Gallery Markdown Output

**Feature Branch**: `001-output-will-be`
**Created**: 2025-10-03
**Status**: Draft
**Input**: User description: "output will be a markdown file with each (command + plot)"

---

## Clarifications

### Session 2025-10-03
- Q: How many plots per entry? → A: 1 plot per entry (initial implementation)
- Q: Command formatting? → A: Render as code block in markdown
- Q: Which metadata to include? → A: Just command and plot (plot uses same metadata each time)
- Q: Entry ordering? → A: Any order is fine
- Q: Handle missing plots? → A: Shouldn't happen (automation generates logs then plots)
- Q: Output location? → A: Top-level README.md (fixed location)
- Q: Regeneration trigger? → A: On demand

---

## User Scenarios & Testing

### Primary User Story
As a gallery user, I want to view a consolidated markdown file that shows all gallery entries with their executed commands and corresponding resource plots, so I can browse and compare different execution behaviors in a single document.

### Acceptance Scenarios
1. **Given** the gallery has multiple entries with executed duct commands and generated plots, **When** I generate the gallery output, **Then** I receive a single markdown file containing each entry's command and plot
2. **Given** a gallery entry has a command and associated plot, **When** I view the markdown output, **Then** I see the command displayed as a code block followed by the plot image embedded
3. **Given** I want to regenerate the gallery output, **When** I trigger generation on demand, **Then** the system creates a new markdown file at the configured output location

### Edge Cases
- What happens when the configured output location is invalid or unwritable?
- How are entries ordered in the output markdown file when order doesn't matter?
- What happens if plot file paths cannot be resolved for embedding?

## Requirements

### Functional Requirements
- **FR-001**: System MUST generate a single markdown file containing all gallery entries
- **FR-002**: System MUST display each entry's duct execution command as a markdown code block
- **FR-003**: System MUST embed exactly one plot image per entry in the markdown output
- **FR-004**: System MUST format commands using markdown code block syntax
- **FR-005**: System MUST embed plot images using appropriate markdown image syntax
- **FR-006**: System MUST include only command and plot for each entry (minimal metadata)
- **FR-007**: System MUST order entries in any consistent manner (ordering not specified)
- **FR-008**: System MUST write output to top-level README.md in repository root
- **FR-009**: System MUST generate output on demand when triggered by user
- **FR-010**: System MUST assume all entries have valid plots generated by automation

### Non-Functional Requirements
- **NFR-001**: Output generation MUST be idempotent (same inputs produce same output)
- **NFR-002**: System MUST validate output path is writable before generation
- **NFR-003**: Generated markdown MUST be valid and renderable by standard markdown viewers

### Key Entities
- **Gallery Entry**: Represents a single duct execution demonstration with command, outputs, and one plot
- **Markdown Output**: The consolidated documentation file containing formatted entries with commands and plots
- **Plot Image**: Single visual representation of resource usage generated from duct info.json data per entry

---

## Review & Acceptance Checklist

### Content Quality
- [x] No implementation details (languages, frameworks, APIs)
- [x] Focused on user value and business needs
- [x] Written for non-technical stakeholders
- [x] All mandatory sections completed

### Requirement Completeness
- [x] No [NEEDS CLARIFICATION] markers remain
- [x] Requirements are testable and unambiguous
- [x] Success criteria are measurable
- [x] Scope is clearly bounded
- [x] Dependencies and assumptions identified

---

## Execution Status

- [x] User description parsed
- [x] Key concepts extracted
- [x] Ambiguities marked
- [x] User scenarios defined
- [x] Requirements generated
- [x] Entities identified
- [x] Review checklist passed

---
